services:
  hytale:
    image: ghcr.io/zuedev/hytale-server-docker:main
    ports:
      - "5520:5520/udp"
    volumes:
      - ./hytale-data:/app/Hytale
    restart: unless-stopped
    stdin_open: true
    tty: true
    network_mode: service:tailscale
    depends_on:
      - tailscale

  tailscale:
    image: tailscale/tailscale:latest
    hostname: "hytale-server"
    environment:environment:
      TS_AUTHKEY: "<YOUR_TAILSCALE_AUTH_KEY>"
      TS_STATE_DIR: "/var/lib/tailscale"
    volumes:
      - ./tailscale-data:/var/lib/tailscale
      - /dev/net/tun:/dev/net/tun
    cap_add:
      - net_admin
      - sys_module
    restart: unless-stopped